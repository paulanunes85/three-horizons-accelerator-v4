<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 760 600" font-family="Segoe UI, sans-serif">
  <defs>
    <linearGradient id="devg" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#95a5a6"/><stop offset="100%" stop-color="#7f8c8d"/></linearGradient>
    <linearGradient id="k8apig" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#2c3e50"/><stop offset="100%" stop-color="#34495e"/></linearGradient>
    <linearGradient id="esog" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#9b59b6"/><stop offset="100%" stop-color="#8e44ad"/></linearGradient>
    <linearGradient id="kvg" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#3498db"/><stop offset="100%" stop-color="#2980b9"/></linearGradient>
    <linearGradient id="secg" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#e67e22"/><stop offset="100%" stop-color="#d35400"/></linearGradient>
    <linearGradient id="podg" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#27ae60"/><stop offset="100%" stop-color="#229954"/></linearGradient>
    <filter id="ds"><feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.15"/></filter>
    <marker id="arr" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" fill="#7f8c8d"/></marker>
  </defs>
  <rect width="760" height="600" rx="12" fill="#f8f9fa" stroke="#dee2e6"/>
  <text x="380" y="28" text-anchor="middle" font-size="18" font-weight="700" fill="#2c3e50">Secret Access Data Flow</text>

  <!-- Step 1: Developer -->
  <rect x="80" y="45" width="220" height="40" rx="8" fill="url(#devg)" filter="url(#ds)"/>
  <text x="190" y="70" text-anchor="middle" font-size="11" fill="#fff" font-weight="600">Developer</text>
  <line x1="302" y1="65" x2="398" y2="65" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arr)"/>
  <text x="350" y="58" text-anchor="middle" font-size="8" fill="#7f8c8d">1. Creates ExternalSecret CR</text>

  <!-- K8s API -->
  <rect x="400" y="45" width="280" height="40" rx="8" fill="url(#k8apig)" filter="url(#ds)"/>
  <text x="540" y="70" text-anchor="middle" font-size="11" fill="#fff" font-weight="600">Kubernetes API</text>
  <line x1="540" y1="87" x2="540" y2="115" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arr)"/>
  <text x="555" y="107" font-size="8" fill="#7f8c8d">2. Notify</text>

  <!-- ESO Controller -->
  <rect x="120" y="122" width="520" height="70" rx="10" fill="url(#esog)" filter="url(#ds)"/>
  <text x="140" y="150" font-size="13" font-weight="700" fill="#fff">EXTERNAL SECRETS OPERATOR (Controller)</text>
  <text x="140" y="172" font-size="10" fill="rgba(255,255,255,0.8)">3. Read ExternalSecret  ·  4. Target: ClusterSecretStore "azure-key-vault"</text>
  <line x1="380" y1="194" x2="380" y2="225" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arr)"/>
  <text x="395" y="216" font-size="8" fill="#7f8c8d">5. Request via Workload Identity</text>

  <!-- Key Vault -->
  <rect x="120" y="232" width="520" height="80" rx="10" fill="url(#kvg)" filter="url(#ds)"/>
  <text x="140" y="260" font-size="13" font-weight="700" fill="#fff">AZURE KEY VAULT</text>
  <text x="140" y="282" font-size="10" fill="rgba(255,255,255,0.8)">6. Verify identity (Workload Identity token)</text>
  <text x="140" y="298" font-size="10" fill="rgba(255,255,255,0.8)">7. Check access policy  ·  8. Return secret value</text>
  <line x1="380" y1="314" x2="380" y2="345" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arr)"/>
  <text x="395" y="336" font-size="8" fill="#7f8c8d">9. Secret value</text>

  <!-- ESO creates secret -->
  <rect x="120" y="352" width="520" height="70" rx="10" fill="url(#esog)" filter="url(#ds)" opacity="0.85"/>
  <text x="140" y="380" font-size="13" font-weight="700" fill="#fff">EXTERNAL SECRETS OPERATOR</text>
  <text x="140" y="400" font-size="10" fill="rgba(255,255,255,0.8)">10. Create K8s Secret  ·  11. Set ownership  ·  12. Schedule refresh (1h)</text>
  <line x1="380" y1="424" x2="380" y2="455" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arr)"/>
  <text x="395" y="446" font-size="8" fill="#7f8c8d">13. K8s Secret created</text>

  <!-- Application Pod -->
  <rect x="120" y="462" width="520" height="60" rx="10" fill="url(#podg)" filter="url(#ds)"/>
  <text x="140" y="490" font-size="13" font-weight="700" fill="#fff">APPLICATION POD</text>
  <text x="140" y="508" font-size="10" fill="rgba(255,255,255,0.8)">14. Mount as volume or env var  ·  15. Use secret in application</text>

  <!-- Step numbers on right side -->
  <rect x="660" y="50" width="80" height="480" rx="8" fill="#fff" stroke="#dee2e6"/>
  <text x="700" y="72" text-anchor="middle" font-size="9" fill="#95a5a6">Steps</text>
  <text x="700" y="95" text-anchor="middle" font-size="8" fill="#7f8c8d">1-2: Create</text>
  <text x="700" y="165" text-anchor="middle" font-size="8" fill="#7f8c8d">3-4: Read</text>
  <text x="700" y="275" text-anchor="middle" font-size="8" fill="#7f8c8d">5-8: Fetch</text>
  <text x="700" y="390" text-anchor="middle" font-size="8" fill="#7f8c8d">9-12: Sync</text>
  <text x="700" y="495" text-anchor="middle" font-size="8" fill="#7f8c8d">13-15: Use</text>

  <!-- Legend -->
  <rect x="80" y="545" width="12" height="12" rx="2" fill="#9b59b6"/>
  <text x="98" y="556" font-size="9" fill="#555">ESO</text>
  <rect x="140" y="545" width="12" height="12" rx="2" fill="#3498db"/>
  <text x="158" y="556" font-size="9" fill="#555">Key Vault</text>
  <rect x="230" y="545" width="12" height="12" rx="2" fill="#27ae60"/>
  <text x="248" y="556" font-size="9" fill="#555">Application</text>
  <text x="380" y="556" font-size="9" fill="#7f8c8d" font-style="italic">ExternalSecret → ESO → Key Vault → K8s Secret → Pod</text>
</svg>