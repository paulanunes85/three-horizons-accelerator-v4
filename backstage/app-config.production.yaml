# Agentic DevOps Platform (Backstage) Production Config
app:
  title: ${PORTAL_NAME:-paulasilvatech} â€” Agentic DevOps Platform
  baseUrl: ${APP_BASE_URL:-http://localhost:7007}

organization:
  name: ${PORTAL_NAME:-paulasilvatech}

backend:
  baseUrl: ${APP_BASE_URL:-http://localhost:7007}
  listen:
    port: 7007
  auth:
    dangerouslyDisableDefaultAuthPolicy: true
  database:
    client: pg
    connection:
      host: ${POSTGRES_HOST}
      port: ${POSTGRES_PORT}
      user: ${POSTGRES_USER}
      password: ${POSTGRES_PASSWORD}

auth:
  environment: development
  providers:
    guest:
      dangerouslyAllowOutsideDevelopment: true
    github:
      development:
        clientId: ${GITHUB_APP_CLIENT_ID}
        clientSecret: ${GITHUB_APP_CLIENT_SECRET}
        signIn:
          resolvers:
            - resolver: usernameMatchingUserEntityName
              dangerouslyAllowSignInWithoutUserInCatalog: true

integrations:
  github:
    - host: github.com
      token: ${GITHUB_TOKEN}
      apps:
        - appId: ${GITHUB_APP_ID}
          clientId: ${GITHUB_APP_CLIENT_ID}
          clientSecret: ${GITHUB_APP_CLIENT_SECRET}
          privateKey: ${GITHUB_APP_PRIVATE_KEY}

techdocs:
  builder: local
  generator:
    runIn: local
  publisher:
    type: local

scaffolder: {}

catalog:
  rules:
    - allow: [Component, System, API, Resource, Location, Template, User, Group]
  locations:
    # Golden Path templates from 3horizons/golden-paths repo
    - type: url
      target: https://github.com/3horizons/golden-paths/blob/main/catalog-info.yaml
      rules:
        - allow: [Location, Template]

permission:
  enabled: true

kubernetes:
  serviceLocatorMethod:
    type: multiTenant
  clusterLocatorMethods:
    - type: config
      clusters: []
