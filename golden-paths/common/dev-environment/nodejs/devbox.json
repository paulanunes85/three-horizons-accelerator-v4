{
  "$schema": "https://raw.githubusercontent.com/jetify-com/devbox/main/.schema/devbox.schema.json",
  "name": "${{ values.name | default('nodejs-express-service') }}",
  "packages": [
    "nodejs@20",
    "pnpm@latest",
    "git@latest",
    "curl@latest",
    "jq@latest",
    "yq@latest",
    "gh@latest",
    "azure-cli@latest",
    "kubectl@latest",
    "kubernetes-helm@latest",
    "kustomize@latest",
    "docker@latest",
    "docker-compose@latest",
    "postgresql@latest",
    "redis@latest"
  ],
  "env": {
    "PROJECT_NAME": "${{ values.name | default('my-service') }}",
    "ENVIRONMENT": "development",
    "NODE_ENV": "development"
  },
  "shell": {
    "init_hook": [
      "echo 'ðŸ“¦ Node.js Express Development Environment'",
      "echo ''",
      "if [ -f .env ]; then set -a; source .env; set +a; fi"
    ],
    "scripts": {
      "setup": [
        "npm install",
        "npm run prepare",
        "echo 'âœ… Node.js environment ready!'"
      ],
      "dev": [
        "npm run dev"
      ],
      "test": [
        "npm test"
      ],
      "test:coverage": [
        "npm run test:coverage"
      ],
      "lint": [
        "npm run lint"
      ],
      "format": [
        "npm run format"
      ],
      "build": [
        "npm run build",
        "docker build -t $PROJECT_NAME:dev ."
      ],
      "db-migrate": [
        "npm run db:migrate"
      ]
    }
  }
}
